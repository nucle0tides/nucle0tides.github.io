---
import '98.css';
import AboutWindow from '../components/AboutWindow.astro';

interface Props {
  title?: string;
  windowTitle?: string;
}

const { windowTitle = 'explorer.exe' } = Astro.props;
const title = Astro.props.title ?? windowTitle;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <link rel="stylesheet" href="/styles/main.css" />
  </head>
  <body>
    <div class="desktop">
      <AboutWindow />

      <!-- Main content window -->
      <div class="window content-window">
        <div class="title-bar">
          <div class="title-bar-text">{windowTitle}</div>
          <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Maximize"></button>
            <button aria-label="Close"></button>
          </div>
        </div>
        <div class="window-body">
          <slot />
        </div>
      </div>

      <!-- Taskbar -->
      <div class="taskbar">
        <button class="start-button">
          <span class="start-icon">ü™ü</span>
          Start
        </button>
        <div class="taskbar-divider"></div>
        <div class="taskbar-buttons">
          <a href="/" class="taskbar-button">
            <span>üìÅ</span> home
          </a>
          <a href="/posts" class="taskbar-button">
            <span>üìÑ</span> posts
          </a>
          <a href="https://github.com/nucle0tides" class="taskbar-button">
            <span>üåê</span> github
          </a>
        </div>
        <div class="system-tray">
          <span class="tray-time" id="tray-time"></span>
        </div>
      </div>
    </div>

    <script>
      function updateTime() {
        const now = new Date();
        const time = now.toLocaleTimeString('en-US', {
          hour: 'numeric',
          minute: '2-digit',
          hour12: true
        });
        const el = document.getElementById('tray-time');
        if (el) el.textContent = time;
      }
      updateTime();
      setInterval(updateTime, 1000);
    </script>
  </body>
</html>
